<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Complaint Ticket</title>

<style>
body{
    font-family:'Courier New', monospace;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:#fff;
    padding:20px;
}
.container{max-width:420px;margin:auto;}
h2{text-align:center;margin-bottom:15px;}

input,select,button{
    width:100%;
    padding:12px;
    margin:8px 0;
    border-radius:8px;
    border:none;
    font-size:15px;
}
button{
    background:#00eaff;
    color:#000;
    font-weight:bold;
    cursor:pointer;
}
button:hover{background:#00c0cc;}

.ticket{
    margin-top:20px;
    background:#f5f5f5;
    color:#000;
    border-radius:14px;
    padding:16px;
    position:relative;
    box-shadow:0 0 20px rgba(0,0,0,.5);
    display:none;
}
.ticket:before,.ticket:after{
    content:'';
    width:18px;
    height:18px;
    background:#0f2027;
    border-radius:50%;
    position:absolute;
    top:50%;
    transform:translateY(-50%);
}
.ticket:before{left:-9px;}
.ticket:after{right:-9px;}

.ticket-header{
    text-align:center;
    border-bottom:2px dashed #999;
    padding-bottom:8px;
}
.ticket-body{
    font-size:14px;
    line-height:1.6;
    margin-top:10px;
}
.barcode{
    margin-top:12px;
    height:45px;
    background:repeating-linear-gradient(
        90deg,#000,#000 2px,#fff 2px,#fff 4px
    );
}
.status{
    margin-top:8px;
    font-weight:bold;
    color:#d10000;
    text-align:center;
}
.footer{
    text-align:center;
    font-size:12px;
    margin-top:8px;
}
.whatsapp-btn{
    margin-top:10px;
    background:#25D366;
    color:#fff;
}
</style>
</head>

<body>

<div class="container">
<h2>ðŸŽŸ Student Complaint Ticket</h2>

<input type="text" id="name" placeholder="Student Name">
<input type="number" id="mobile" placeholder="Mobile Number">

<select id="issue">
<option value="">Select Complaint Type</option>
<option>App Problem</option>
<option>Course Issue</option>
<option>PDF Problem</option>
<option>Test Series Issue</option>
<option>Payment Issue</option>
</select>

<button onclick="generateTicket()">Generate Ticket</button>

<div class="ticket" id="ticket">
    <div class="ticket-header">
        <h3>STUDENT SUPPORT TICKET</h3>
        <small>Ticket No: <span id="tno"></span></small>
    </div>

    <div class="ticket-body">
        <b>Name:</b> <span id="tname"></span><br>
        <b>Mobile:</b> <span id="tmobile"></span><br>
        <b>Issue:</b> <span id="tissue"></span><br>
        <b>Generated:</b> <span id="tdate"></span><br>
        <b>Valid Till:</b> <span id="tvalid"></span>
    </div>

    <div class="barcode"></div>
    <div class="status">STATUS : OPEN</div>
    <div class="footer">Please keep this ticket for reference</div>

    <button class="whatsapp-btn" onclick="sendWhatsApp()">
        ðŸ“² Send Ticket on WhatsApp
    </button>
</div>
</div>

<!-- html2canvas CDN -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
let studentMobile="";

function generateTicket(){
    let name=document.getElementById("name").value;
    let mobile=document.getElementById("mobile").value;
    let issue=document.getElementById("issue").value;

    if(name==""||mobile==""||issue==""){
        alert("All fields are required");
        return;
    }

    studentMobile=mobile;

    let ticketNo="TKT"+Date.now();
    let now=new Date();
    let valid=new Date();
    valid.setDate(now.getDate()+7);

    document.getElementById("tno").innerText=ticketNo;
    document.getElementById("tname").innerText=name;
    document.getElementById("tmobile").innerText=mobile;
    document.getElementById("tissue").innerText=issue;
    document.getElementById("tdate").innerText=now.toLocaleString();
    document.getElementById("tvalid").innerText=valid.toLocaleDateString();

    document.getElementById("ticket").style.display="block";
}

function sendWhatsApp(){
    if(!navigator.share){
        alert("WhatsApp sharing works only on mobile browser");
        return;
    }

    html2canvas(document.getElementById("ticket")).then(canvas=>{
        canvas.toBlob(blob=>{
            let file=new File([blob],"ticket.png",{type:"image/png"});

            navigator.share({
                files:[file],
                title:"Support Ticket",
                text:"Your complaint ticket"
            });
        });
    });
}
</script>

</body>
</html>
